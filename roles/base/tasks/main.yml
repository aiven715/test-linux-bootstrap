---
- name: install packages
  pacman:
    # update_cache: yes
    name:
      - alacritty
      - git
      - openssh
      - thunar

      # xorg
      - xorg-server
      - xorg-xinit

      # interface
      - bspwm
      - sxhkd
      - picom
      - rofi
      - feh
      - gnome-themes-extra

      # browsers
      - chromium
      - firefox

      # editors
      - neovim
      - vim

      # fonts
      - noto-fonts
      - ttf-dejavu
      - ttf-roboto
      - ttf-liberation
      - ttf-ubuntu-font-family
      - ttf-freefont

      # utils
      - fzf
      - ack
      - bash-completion
      - sysstat
      - alsa-utils
      - dhcpcd
      - netctl

      # dev
      - nodejs
      - npm
      - yarn
      - docker
      - docker-compose

      # other
      - unzip
      - firejail
      - vifm
      - man
      - dialog
      - wpa_supplicant
      - xclip
    state: present

- name: install intel video
  pacman:
    # update_cache: yes
    name:
      - xf86-video-intel
    state: present
  when: video == "intel"

- name: install amd video
  pacman:
    # update_cache: yes
    name:
      - xf86-video-amdgpu
    state: present
  when: video == "amd"

- name: install acpi
  pacman:
    # update_cache: yes
    name:
      - acpi
    state: present
  when: battery == true

- name: install xbacklight
  pacman:
    # update_cache: yes
    name:
      - xorg-xbacklight
    state: present
  when: backlight == true

- name: jail node
  file:
    src: /usr/bin/firejail
    dest: /usr/local/bin/node
    state: link

- name: jail npm
  file:
    src: /usr/bin/firejail
    dest: /usr/local/bin/npm
    state: link

- name: jail yarn
  file:
    src: /usr/bin/firejail
    dest: /usr/local/bin/yarn
    state: link
